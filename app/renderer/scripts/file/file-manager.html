<div style="width:100%" layout="column">
    <!--

         <div style='100%' layout='row'>
        <div flex layout='column' tabIndex='-1' role='main' class='md-whiteframe-z2'>   
<md-toolbar layout="row" class="md-whiteframe-z1 layout-row">
                <div class="md-toolbar-tools">
                    <a class="md-icon-button md-button md-ink-ripple" ng-transclude="" aria-label="Home" ng-href="#/home" href="#/home">
                        <md-icon class="material-icons ng-scope ng-isolate-scope" aria-label="Home">home</md-icon>    
                    </a>
                    <h2>
                        <span>File Management</span>
                    </h2>
                </div>                    
            </md-toolbar>
                <md-toolbar class="md-whiteframe-z1" layout="row">
        <md-button class="md-warn" aria-label="Home" ng-href="#/home">Home</md-button>
        <h2>
          <span>File Management</span>
        </h2>
    </md-toolbar>
    -->
            <md-toolbar layout='row' class='md-whiteframe-z1'>
                <div class="md-toolbar-tools">
                    <md-button class="md-icon-button" aria-label="Home" ng-href="#/home" ng-click="_ctrl.toggleSidenav('left')" >
                        <md-icon class="material-icons" aria-label="Home">home</md-icon>    
                    </md-button>
                    <h2>
                        <span>File Management</span>
                    </h2>
                </div>                    
            </md-toolbar>
    <div style="width:100%" layout="row">
        <md-sidenav class="site-sidenav md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="true">
            <!--  md-is-locked-open="$mdMedia('gt-sm')"-->
            <md-toolbar layout="row" class="md-whiteframe-z1">
                <md-headline layout-padding>Files</md-headline>
            </md-toolbar>
            <md-input-container style="margin-bottom:0">
                <label>File</label>
                <input required name="FileName" ng-model="_ctrl.filterText" ng-change="_ctrl.filterFile()">
            </md-input-container>
            <md-list>
                <!-- notice work around for nedb. 'track by index'' to fix $$hashkey problem -->
                <md-list-item ng-repeat="it in _ctrl.files track by $index" ng-click="_ctrl.selectFile(it, $index)">
                    <p>{{it.FILE_GENERIC.FILENAME}}</p>
                </md-list-item>
            </md-list>
        </md-sidenav>

        <div flex layout="column" tabIndex="-1" role="main" class="md-whiteframe-z2">
            <md-toolbar layout="row" class="md-whiteframe-z1">
                <md-headline layout-padding>{{ _ctrl.selected.FILE_GENERIC.FILENAME }}</md-headline>
            </md-toolbar>
            <md-content layout-padding class="autoScroll">
                <form name="fileForm">
                    <div layout-gt-xs="row">
                        <h3>File Generic</h3>
                    </div>
                    <div layout-gt-xs="row">
                        <md-input-container class="md-block" flex-gt-xs>
                            <label>Identifier</label>
                            <input ng-model="_ctrl.selected._identifier">
                        </md-input-container>
                    </div>
                    <div layout-gt-sm="row">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Name</label>
                            <input ng-model="_ctrl.selected.FILE_GENERIC.FILENAME" type="text">
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>PID</label>
                            <input ng-model="_ctrl.selected.FILE_GENERIC.FILE_PID" type="text" ng-required="false">
                        </md-input-container>
                    </div>
                    <div layout-gt-sm="row">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>File Type</label>
                            <input ng-model="_ctrl.selected.FILE_GENERIC.FILE_TYPE.VALUE" type="text">
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Status</label>
                            <input ng-model="_ctrl.selected.FILE_GENERIC.METADATA_STATUS.VALUE" type="text">
                        </md-input-container>
                    </div>
                    <div layout-gt-sm="row">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>File Company Id</label>
                            <input ng-model="_ctrl.selected.FILE_GENERIC.FILE_COMPANY_ID" type="text">
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>File Content Status</label>
                            <input ng-model="_ctrl.selected.FILE_GENERIC.CONTENT_STATUS.VALUE" type="text">
                        </md-input-container>
                    </div>

                    <div layout-gt-sm="row">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Format Comment</label>
                            <input ng-model="_ctrl.selected.FILE_GENERIC.FORMAT_COMMENT" type="text">
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>MD 5</label>
                            <input ng-model="_ctrl.selected.FILE_GENERIC.MD5CHECKSUM" type="text">
                        </md-input-container>
                        <!--                       
                    <h3>File RA</h3>
                    <md-list>
                        <md-list-item ng-repeat="otherName in _ctrl.selected.OTHER_NAME track by $index" class="noright">
                            <md-input-container class="md-block" flex="80">
                                <label>Other Name</label>
                                <input ng-model="_ctrl.selected.FILE_RA[$index]" type="text">
                            </md-input-container>
                            <md-button class="md-secondary md-raised" ng-click="_ctrl.deleteOtherName(otherName, $event)">Delete</md-button> 
                        </md-list-item>
                    </md-list>
                        -->
                    </div>
                    <md-toolbar>
                        <div class="md-toolbar-tools">
                            <h2>File RA</h2>
                            <span flex></span>
                            <md-button class="md-icon-button" ng-click="_ctrl.addFileRA()">
                                <md-icon class="material-icons" aria-label="Add File RA">add_circle</md-icon>
                            </md-button>
                        </div>
                    </md-toolbar>
                    <md-list class="md-block" flex-gt-sm>
                        <md-list-item ng-repeat="it in _ctrl.selected.FILE_RA track by $index" class="noright" flex-gt-sm>

                            <div layout-gt-sm="row">

                                <md-input-container class="md-block" flex-gt-sm>
                                    <label>File Status</label>
                                    <input ng-model="it.METADATA_STATUS.VALUE" type="text">
                                </md-input-container>
                                <md-input-container class="md-block" flex-gt-sm>
                                    <label>CBI DESIGNATION</label>
                                    <input ng-model="it.CBI_DESIGNATION" type="text">
                                </md-input-container>
                                <md-input-container class="md-block" flex-gt-sm>
                                    <label>FILE COMMENT</label>
                                    <input ng-model="it.FILE_COMMENT" type="text">
                                </md-input-container>
                                <md-button class="md-secondary md-raised" ng-click="_ctrl.deleteFileRA($index, $event)">Delete</md-button>
                            </div>
                        </md-list-item>
                    </md-list>



                </form>
            </md-content>

            <section layout="row" layout-sm="column" layout-align="center center" layout-wrap>
                <md-button class="md-raised md-info" ng-click="_ctrl.createFile()">Add</md-button>
                <md-button class="md-raised md-primary" ng-click="_ctrl.saveFile()" ng-disabled="fileForm.$invalid">Save</md-button>
                <md-button class="md-raised md-danger" ng-click="_ctrl.cancelEdit()">Cancel</md-button>
                <md-button class="md-raised md-warn" ng-click="_ctrl.deleteFile()">Delete</md-button>
                <md-button class="md-raised md-primary" ng-click="_ctrl.viewFileJson()">View File JSON</md-button>
                <md-button class="md-raised md-primary" ng-click="_ctrl.viewFileGHSTS()">View File GHSTS</md-button>

                <md-button class="md-raised md-warn" ng-click="_ctrl.addTestFile()">Add Sample File to DB</md-button>
                <md-button class="md-raised md-warn" ng-click="_ctrl.initializeFile()">Initalize DB with Sample GHSTS Files</md-button>

            </section>
        </div>
    </div>
</div>