<section layout-fill layout="row">
    <md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="$mdMedia('gt-sm')">
        <md-toolbar class="md-whiteframe-z1" layout="row">
            <div class="md-toolbar-tools">
                <md-button class="md-icon-button" aria-label="Home" ng-href="#/home">
                    <md-icon class="material-icons" aria-label="Home">home</md-icon>
                </md-button>
                <h2>
                    <span>File Management</span>
                </h2>
            </div>
        </md-toolbar>
        <md-input-container style="margin-bottom:0">
            <label>File Name</label>
            <input name="FileName" ng-model="_ctrl.filterText" ng-change="_ctrl.filterFile()">
        </md-input-container>
        <md-content>
            <md-list>
                <!-- notice work around for nedb. 'track by index'' to fix $$hashkey problem -->
                <md-list-item ng-repeat="it in _ctrl.files track by $index" ng-click="_ctrl.selectFile(it, $index)">
                    <md-icon class="material-icons" aria-label="File">description</md-icon>
                    <p>{{it.FILE_GENERIC.FILENAME}}</p>
                </md-list-item>
            </md-list>
        </md-content>
    </md-sidenav>

    <div flex layout="column" tabIndex="-1" role="main" class="md-whiteframe-z2">
        <md-toolbar layout="row" class="md-whiteframe-z1">
            <div class="md-toolbar-tools">
                <md-button class="md-icon-button" aria-label="Document" ng-click="_ctrl.toggleSidenav('left')" hide-gt-sm>
                    <md-icon class="material-icons" aria-label="Document">business</md-icon>
                </md-button>
                <h2> {{ _ctrl.selected.FILE_GENERIC.FILENAME}}</h2>
            </div>
            <!--          <md-headline layout-padding>{{ _ctrl.selected.FILE_GENERIC.FILENAME }}</md-headline> -->
        </md-toolbar>
        <md-content layout-padding class="autoScroll">
            <form name="fileForm">
                <div layout-gt-xs="row">
                    <h3>File Generic</h3>
                </div>
                <div layout-gt-xs="row">
                    <md-input-container class="md-block" flex-gt-xs>
                        <label>Identifier</label>
                        <input ng-model="_ctrl.selected._identifier">
                    </md-input-container>
                </div>
                <div layout-gt-sm="row">
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>Name</label>
                        <input ng-model="_ctrl.selected.FILE_GENERIC.FILENAME" type="text">
                    </md-input-container>
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>PID</label>
                        <input ng-model="_ctrl.selected.FILE_GENERIC.FILE_PID" type="text" ng-required="false">
                    </md-input-container>
                </div>
                <div layout-gt-sm="row">
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>File Type</label>
                        <input ng-model="_ctrl.selected.FILE_GENERIC.FILE_TYPE.VALUE" type="text">
                    </md-input-container>
                    <!--
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>Status</label>
                        <input ng-model="_ctrl.selected.FILE_GENERIC.METADATA_STATUS.VALUE" type="text">
                    </md-input-container>
                    -->
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>Status</label>
                        <md-select name='Status' id='Status' ng-model='_ctrl.selected.FILE_GENERIC.METADATA_STATUS.VALUE'>
                            <md-option ng-repeat='status in _ctrl.metadataStatusOptions' value='{{ status.VALUE }}' ng-selected='{{ _ctrl.selected.METADATA_STATUS.VALUE === status.VALUE }}'>
                                {{status.VALUE_DECODE }}
                            </md-option>
                        </md-select>
                    </md-input-container>
                </div>
                <div layout-gt-sm="row">
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>File Company Id</label>
                        <input ng-model="_ctrl.selected.FILE_GENERIC.FILE_COMPANY_ID" type="text">
                    </md-input-container>
                    <!--
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>File Content Status</label>
                        <input ng-model="_ctrl.selected.FILE_GENERIC.CONTENT_STATUS.VALUE" type="text">
                    </md-input-container>
                    -->
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>File Content Status</label>
                        <md-select name='file-content-Status' id='file-content-Status' ng-model='_ctrl.selected.FILE_GENERIC.CONTENT_STATUS.VALUE'>
                            <md-option ng-repeat='status in _ctrl.metadataStatusOptions' value='{{ status.VALUE }}' ng-selected='{{ _ctrl.selected.METADATA_STATUS.VALUE === status.VALUE }}'>
                                {{status.VALUE_DECODE }}
                            </md-option>
                        </md-select>
                    </md-input-container>
                </div>

                <div layout-gt-sm="row">
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>Format Comment</label>
                        <input ng-model="_ctrl.selected.FILE_GENERIC.FORMAT_COMMENT" type="text">
                    </md-input-container>
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>MD 5</label>
                        <input ng-model="_ctrl.selected.FILE_GENERIC.MD5CHECKSUM" type="text">
                    </md-input-container>
                    <md-button class="md-icon-button" ng-click="_ctrl.showMD5Diag('', $event)">
                        <md-icon class="material-icons" aria-label="Generate MD5">add_circle</md-icon>
                    </md-button>
                </div>
                <md-toolbar>
                    <div class="md-toolbar-tools">
                        <h2>File RA</h2>
                        <span flex></span>
                        <md-button class="md-icon-button" ng-click="_ctrl.addFileRA()">
                            <md-icon class="material-icons" aria-label="Add File RA">add_circle</md-icon>
                        </md-button>
                    </div>
                </md-toolbar>
                <md-list class="md-block" flex-gt-sm>
                    <md-list-item ng-repeat="it in _ctrl.selected.FILE_RA track by $index" class="noright" flex-gt-sm>

                        <div layout-gt-sm="row">
                            <!--
                            <md-input-container class="md-block" flex-gt-sm>
                                <label>File Status</label>
                                <input ng-model="it.METADATA_STATUS.VALUE" type="text">
                            </md-input-container>
                            -->
                            <md-input-container class="md-block" flex-gt-sm>
                                <label>File Status</label>
                                <md-select name='file-Status' id='file-Status' ng-model='it.METADATA_STATUS.VALUE'>
                                    <md-option ng-repeat='status in _ctrl.metadataStatusOptions' value='{{ status.VALUE }}' ng-selected='{{ _ctrl.selected.METADATA_STATUS.VALUE === status.VALUE }}'>
                                        {{status.VALUE_DECODE }}
                                    </md-option>
                                </md-select>
                            </md-input-container>
                            <md-input-container class="md-block" flex-gt-sm>
                                <label>CBI DESIGNATION</label>
                                <input ng-model="it.CBI_DESIGNATION" type="text">
                            </md-input-container>
                            <md-input-container class="md-block" flex-gt-sm>
                                <label>FILE COMMENT</label>
                                <input ng-model="it.FILE_COMMENT" type="text">
                            </md-input-container>
                            <md-button class="md-secondary md-raised" ng-click="_ctrl.deleteFileRA($index, $event)">Delete</md-button>
                        </div>
                    </md-list-item>
                </md-list>
            </form>
        </md-content>

<<<<<<< HEAD
            </form>
        </md-content>

        <section layout="row" layout-sm="column" layout-align="center center" layout-wrap>
            <md-button class="md-raised md-info" ng-click="_ctrl.createFile()">Add</md-button>
            <md-button class="md-raised md-primary" ng-click="_ctrl.saveFile()" ng-disabled="fileForm.$invalid">Save</md-button>
            <md-button class="md-raised md-danger" ng-click="_ctrl.generateMD('test')">Cancel</md-button>
            <md-button class="md-raised md-warn" ng-click="_ctrl.deleteFile()">Delete</md-button>
            <md-button class="md-raised md-primary" ng-click="_ctrl.viewFileJson()">View File JSON</md-button>
            <md-button class="md-raised md-primary" ng-click="_ctrl.viewFileGHSTS()">View File GHSTS</md-button>

            <md-button class="md-raised md-warn" ng-click="_ctrl.addTestFile()">Add Sample File to DB</md-button>
            <md-button class="md-raised md-warn" ng-click="_ctrl.initializeFile()">Initalize DB with Sample GHSTS Files</md-button>
        </section>
    </div>
    </div>
</section>