<section class='node-page'>
  <spinner ng-show='$ctrl.$scope.$root.loading'></spinner>
  <div class='no-margin no-padding' ng-show='!$ctrl.$scope.$root.loading'>
    <div class='extension-wrapper'>
      <text-input label='{{"dossierpid" | translate}}' text-value='$ctrl.selected.dossierpid' is-required='true' on-update='$ctrl.update("dossierpid", value)'></text-input>
      <md-button class='md-raised md-primary' ng-click='$ctrl.genPid()'>Generate PID</md-button>
    </div>
    <text-input label='{{"dossiercompid" | translate}}' is-required='true' text-value='$ctrl.selected.dossiercompid' on-update='$ctrl.update("dossiercompid", value)' max-length='20'></text-input>
    <text-input label='{{"dossierdescriptiontitle" | translate}}' is-required='true' text-value='$ctrl.selected.dossierdescriptiontitle' max-length='2000' on-update='$ctrl.update("dossierdescriptiontitle", value)'></text-input>
    <md-switch ng-if='!$ctrl.loading' ng-model='$ctrl.submission.incremental' aria-label='Incremental' class='md-primary' ng-change='$ctrl.printValue()'>Incremental</md-switch>
    <tbl-new ng-if='!$ctrl.$scope.$root.loading' title='{{"dossierregulartoryauthorities" | translate}}' items='$ctrl.selected.dossierra' projection='[{name: "toSpecificForRAId", url: "receiver"}, {name: "regulatorytype", url: "picklist"}, {name: "applicationtype", url: "picklist"}, "projectidnumber"]'
      min-items='1' on-select='$ctrl.selectTblItem("dossierra", index)' on-delete='$ctrl.deleteTblItem("dossierra", index)'
      deletable='true' on-add='$ctrl.addTblItem("dossierra")' is-required='true'></tbl-new>
    <tbl-new ng-if='!$ctrl.$scope.$root.loading' title='{{"referenceddossiers" | translate}}' items='$ctrl.selected.referenceddossier' projection='["referenceddossiernumber","referenceddossierreason" ]'
      on-select='$ctrl.selectTblItem("referenceddossier", index)' on-delete='$ctrl.deleteTblItem("referenceddossier", index)'
      deletable='true' on-add='$ctrl.addTblItem("referenceddossier")'></tbl-new>
  </div>
  <div class='float-bottom'>
    <md-button aria-label='Save' class='md-fab md-primary' ng-click='$ctrl.save()'>
      <md-tooltip>Save</md-tooltip>
      <md-icon md-svg-icon='save' class='light'></md-icon>
    </md-button>
  </div>
</section>