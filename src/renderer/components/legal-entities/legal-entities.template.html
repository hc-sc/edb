<section class='node-page'>
  <spinner ng-if='$ctrl.loading'></spinner>
  <div class='no-margin no-padding' ng-if='!ctrl.loading'>
    <div ng-if='$ctrl.records && $ctrl.records.length == 0'>{{"noitems" | translate}}</div>
    <div ng-if='!($ctrl.records && $ctrl.records.length == 0)'>
      <sidenav items='$ctrl.records' selected='$ctrl.selected' main='legalentityname' is-open='$ctrl.sidenavOpen' on-select='$ctrl.updateSelected(item)'
        on-add='$ctrl.add(item)'>
      </sidenav>
      <div class='extension-wrapper'>
        <text-input label='{{"legalentitypid" | translate}}' text-value='$ctrl.selected.legalentitypid' is-required='true' on-update='$ctrl.update("legalentitypid", value)'></text-input>
        <md-button class='md-raised md-primary' ng-click='$ctrl.genPid()'>Generate PID</md-button>
      </div>
      <text-input label='{{"legalentityname" | translate}}' text-value='$ctrl.selected.legalentityname' is-required='true' on-update='$ctrl.update("legalentityname", value)' max-Length='255'></text-input>

      <select-input-extensible label='{{"legalentitytype" | translate}}'
          values='$ctrl.legalEntityTypes'
          select-value='$ctrl.selected.legalentitytype'
          is-required='true'
          on-update='$ctrl.update("legalentitytype", value)'
          on-add='$ctrl.createPicklistItem("legalentitytype", "legalEntityTypes", value)'
          type-name='EXTENSION_TYPE_LEGALENTITY_TYPE'>
      </select-input-extensible>


      <list label='{{"othername" | translate}}' items='$ctrl.selected.othername'></list>
      <tbl-new ng-if='!$ctrl.loading' title='{{"otheridentifiers" | translate}}' items='$ctrl.selected.legalentityidentifier' projection='[{name: "legalentityidentifiertype", url: "picklist"},"identifier"]'
        on-select='$ctrl.selectTblItem("legalentityidentifier", index)' on-add='$ctrl.addTblItem("legalentityidentifier")' on-delete='$ctrl.deleteTblItem("legalentityidentifier", index)'></tbl-new>
      <md-toolbar>
        <div class='md-toolbar-tools custom-toolbar'>
          <h2 class='md-title'>{{"contactaddress" | translate}}</h2>
        </div>
      </md-toolbar>
      <div class='group-container'>
        <text-input label='{{"street1" | translate}}' text-value='$ctrl.selected.contactaddress.street1' is-required='true' on-update='$ctrl.update("contactaddress.street1", value)' max-Length='255'></text-input>
        <text-input label='{{"street2" | translate}}' text-value='$ctrl.selected.contactaddress.street2' on-update='$ctrl.update("contactaddress.street2", value)' max-Length='255'></text-input>
        <text-input label='{{"zipcode" | translate}}' text-value='$ctrl.selected.contactaddress.zipcode' on-update='$ctrl.update("contactaddress.zipcode", value)' max-Length='255'></text-input>
        <text-input label='{{"city" | translate}}' text-value='$ctrl.selected.contactaddress.city' is-required='true' on-update='$ctrl.update("contactaddress.city", value)' max-Length='255'></text-input>
        <text-input label='{{"state" | translate}}' text-value='$ctrl.selected.contactaddress.state' on-update='$ctrl.update("contactaddress.state", value)' max-Length='255'></text-input>
        <select-input-extensible label='{{"country" | translate}}' select-value='$ctrl.selected.contactaddress.country'
          values='$ctrl.countries' is-required='true' on-update='$ctrl.update("contactaddress.country", value)'
          type-name='EXTENSION_TYPE_COUNTRY' show-value='true'
          on-add='$ctrl.createPicklistItem("contactaddress.country", "countries", value)'></select-input-extensible>
        <text-input label='{{"phone" | translate}}' text-value='$ctrl.selected.contactaddress.phone' on-update='$ctrl.update("contactaddress.phone", value)' max-Length='255'></text-input>
        <text-input label='{{"fax" | translate}}' text-value='$ctrl.selected.contactaddress.fax' on-update='$ctrl.update("contactaddress.fax", value)' max-Length='255'></text-input>
        <text-input label='{{"email" | translate}}' text-value='$ctrl.selected.contactaddress.email' on-update='$ctrl.update("contactaddress.email", value)' max-Length='255'></text-input>

        <text-input label='{{"website" | translate}}' text-value='$ctrl.selected.contactaddress.website' on-update='$ctrl.update("contactaddress.website", value)'></text-input>
      </div>
      <tbl-new ng-if='!$ctrl.loading' title='{{"contacts" | translate}}' items='$ctrl.selected.contactperson' projection='["lastname", "firstname", "title", "email"]'
        on-select='$ctrl.selectTblItem("contactperson", index)' on-add='$ctrl.addTblItem("contactperson")' on-delete='$ctrl.deleteTblItem("contactperson", index)'></tbl-new>
    </div>
    <div class='float-bottom'>
      <md-button aria-label='Save' class='md-fab md-primary' ng-click='$ctrl.save()'>
        <md-tooltip>Save</md-tooltip>
        <md-icon md-svg-icon='save' class='light'></md-icon>
      </md-button>
      <md-button aria-label='Add New Item' class='md-fab md-primary' ng-click='$ctrl.add("legalentity")'>
        <md-tooltip>Add</md-tooltip>
        <md-icon md-svg-icon='add' class='light'></md-icon>
      </md-button>
      <md-button aria-label='Toggle List' class='md-fab md-primary' ng-click='$ctrl.toggleList()'>
        <md-tooltip>View List</md-tooltip>
        <md-icon md-svg-icon='list' class='light'></md-icon>
      </md-button>
    </div>
  </div>
</section>