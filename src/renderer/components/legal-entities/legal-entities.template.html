<section class='node-page'>
  <spinner ng-if='$ctrl.loading'></spinner>
  <div class='no-margin no-padding' ng-if='!ctrl.loading'>
    <sidenav items='$ctrl.records'
          selected='$ctrl.selected'
          main='legalentityname'
          is-open='$ctrl.sidenavOpen'
          on-select='$ctrl.updateSelected(item)'
          on-add='$ctrl.add(item)'>
    </sidenav>
    <text-input label='{{"legalentitypid" | translate}}' text-value='$ctrl.selected.legalentitypid' is-required='true' on-update='$ctrl.update("legalentitypid", value)'></text-input>
    <text-input label='{{"legalentityname" | translate}}' text-value='$ctrl.selected.legalentityname' is-required='true' on-update='$ctrl.update("legalentityname", value)'></text-input>
    <select-input-extensible label='{{"legalentitytype" | translate}}' 
        values='$ctrl.legalEntityTypes' 
        select-value='$ctrl.selected.legalentitytype' 
        on-update='$ctrl.update("legalentitytype", value)' 
        on-add='$ctrl.createPicklistItem("legalentitytype", "legalEntityTypes", value)' 
        type-name='EXTENSION_TYPE_LEGALENTITY_TYPE'>
    </select-input-extensible>
    <list label='{{"othername" | translate}}' items='$ctrl.selected.othername'></list>
    <tbl ng-if='!$ctrl.loading' title='{{"identifiers" | translate}}' items='$ctrl.selected.legalentityidentifier' projection='[{name: "legalentityidentifiertype", url: "picklist"}, "identifier"]' on-select='$ctrl.selectTblItem("legalentityidentifier", index)' on-add='$ctrl.addTblItem("legalentityidentifier")' on-delete='$ctrl.deleteTblItem("legalentityidentifier", index)'></tbl>
    <fieldset>
      <legend>{{"contactaddress" | translate}}</legend>
      <text-input label='{{"street1" | translate}}' text-value='$ctrl.selected.contactaddress.street1' on-update='$ctrl.updateContactAddress("street1", value)'></text-input>
      <text-input label='{{"street2" | translate}}' text-value='$ctrl.selected.contactaddress.street2' on-update='$ctrl.updateContactAddress("street2", value)'></text-input>
      <text-input label='{{"zipcode" | translate}}' text-value='$ctrl.selected.contactaddress.zipcode' on-update='$ctrl.updateContactAddress("zipcode", value)'></text-input>
      <text-input label='{{"city" | translate}}' text-value='$ctrl.selected.contactaddress.city' on-update='$ctrl.updateContactAddress("city", value)'></text-input>
      <text-input label='{{"state" | translate}}' text-value='$ctrl.selected.contactaddress.state' on-update='$ctrl.updateContactAddress("state", value)'></text-input>
      <select-input-extensible label='{{"country" | translate}}' show-value='true' select-value='$ctrl.selected.contactaddress.country' values='$ctrl.countries' on-update='$ctrl.updateContactAddress("country", value)'></select-input-extensible>
      <text-input label='{{"phone" | translate}}' text-value='$ctrl.selected.contactaddress.phone' on-update='$ctrl.updateContactAddress("phone", value)'></text-input>
      <text-input label='{{"fax" | translate}}' text-value='$ctrl.selected.contactaddress.fax' on-update='$ctrl.updateContactAddress("fax", value)'></text-input>
      <text-input label='{{"email" | translate}}' text-value='$ctrl.selected.contactaddress.email' on-update='$ctrl.updateContactAddress("email", value)'></text-input>
      <text-input label='{{"website" | translate}}' text-value='$ctrl.selected.contactaddress.website' on-update='$ctrl.updateContactAddress("website", value)'></text-input>
    </fieldset>
    <tbl ng-if='!$ctrl.loading' title='{{"contacts" | translate}}' items='$ctrl.selected.contactperson' projection='["lastname", "firstname", "title", "email"]' on-select='$ctrl.selectTblItem("contactperson", index)' on-add='$ctrl.addTblItem("contactperson")' on-delete='$ctrl.deleteTblItem("contactperson", index)'></tbl>
    <div class='float-bottom'>
      <md-button aria-label='Save' class='md-fab md-primary' ng-click='$ctrl.save()'>
        <md-icon md-svg-icon='save' class='light'></md-icon>
      </md-button>
      <md-button aria-label='Add New Item' class='md-fab md-primary' ng-click='$ctrl.add("legalentity")'>
        <md-icon md-svg-icon='add' class='light'></md-icon>
      </md-button>
      <md-button aria-label='Toggle List' class='md-fab md-primary' ng-click='$ctrl.toggleList()'>
        <md-icon md-svg-icon='list' class='light'></md-icon>
      </md-button>
    </div>
  </div>
</section>